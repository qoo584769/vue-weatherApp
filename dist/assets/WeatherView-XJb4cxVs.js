import{d as W,r as g,c as I,a as T,o as $,b as p,e as f,f as e,t as m,u as _,F as x,g as k,h as V,n as z,i as N,j as E,w as B,v as H,k as w}from"./index-gkcA8eG5.js";const D=W("currentWeather",()=>{const u="CWA-E6161C67-7694-4D12-B55A-F7EA4D41BE4C",o=g(466920),s=g(null),r=g({day:["bg-[url('@/assets/image/bg-sunny.jpg')]","bg-[url('@/assets/image/bg-cloudy-day.jpg')]","bg-[url('@/assets/image/bg-overcast.jpg')]","bg-[url('@/assets/image/bg-rain.jpg')]","bg-[url('@/assets/image/bg-foggy.jpg')]"],night:["bg-[url('@/assets/image/bg-clear-night.jpg')]","bg-[url('@/assets/image/bg-moon.jpg')]","bg-[url('@/assets/image/bg-overcast.jpg')]","bg-[url('@/assets/image/bg-rain.jpg')]","bg-[url('@/assets/image/bg-foggy.jpg')]"]}),i=l=>l>=6&&l<18?"day":"night",t=(l="晴",h)=>{const c=l.match(/雷|多雲|雨|陰|晴/),n=i(new Date(h).getHours());return!c||c[0]==="晴"?r.value[n][0]:c[0]==="多雲"?r.value[n][1]:c[0]==="陰"?r.value[n][2]:c[0]==="雨"?r.value[n][3]:r.value[n][4]},a=async(l=466920)=>{try{let h="";["C0D660","C0K330","C0M790"].includes(l)?h=`https://opendata.cwa.gov.tw/api/v1/rest/datastore/O-A0001-001?Authorization=${u}&StationId=${l}`:h=`https://opendata.cwa.gov.tw/api/v1/rest/datastore/O-A0003-001?Authorization=${u}&StationId=${l}`;const n=await T.get(h);s.value=n.data.records.Station[0]}catch(h){console.error(h)}},d=I(()=>{var l,h,c,n,v,b,S,F;return[{icon:"water_drop",text:"降雨機率",value:(h=(l=s.value)==null?void 0:l.WeatherElement)==null?void 0:h.Now.Precipitation,unit:"%"},{icon:"humidity_percentage",text:"濕度",value:(n=(c=s.value)==null?void 0:c.WeatherElement)==null?void 0:n.RelativeHumidity,unit:"%"},{icon:"air",text:"風速",value:(b=(v=s.value)==null?void 0:v.WeatherElement)==null?void 0:b.WindSpeed,unit:"m/s"},{icon:"explore",text:"氣壓",value:(F=(S=s.value)==null?void 0:S.WeatherElement)==null?void 0:F.AirPressure,unit:"hPa"}]}),y=I(()=>{var c,n,v,b;const l=(n=(c=s.value)==null?void 0:c.WeatherElement)==null?void 0:n.Weather,h=(b=(v=s.value)==null?void 0:v.ObsTime)==null?void 0:b.DateTime;return t(l,h)});return{stationId:o,weatherData:s,currentDetail:d,currentBackground:y,fetchCurrentWeather:a}}),C=W("weatherIcon",()=>{const u=g({day:["sunny","partly_cloudy_day","cloud","rainy","thunderstorm"],night:["bedtime","partly_cloudy_night","cloud","rainy","thunderstorm"]}),o=r=>r>=6&&r<18?"day":"night";return{getWeatherIcon:(r="1",i)=>{const t=r.match(/雷|多雲|雨|陰|晴/),a=o(new Date(i).getHours());return t?t[0]==="晴"?u.value[a][0]:t[0]==="多雲"?u.value[a][1]:t[0]==="陰"?u.value[a][2]:t[0]==="雨"?u.value[a][3]:u.value[a][4]:parseInt(r)===1?u.value[a][0]:parseInt(r)<=4?u.value[a][1]:parseInt(r)<=7?u.value[a][2]:parseInt(r)<=14?u.value[a][3]:u.value[a][4]}}}),M={class:"text-center space-y-4 pt-5 pb-5"},L={class:"font-bold text-3xl"},O={class:"text-6xl flex justify-center items-end"},P={class:""},K={class:"material-symbols-outlined text-[40px]"},R={class:"flex justify-center gap-4"},Z={class:"flex gap-1"},Y={class:"text-3xl"},U={class:"flex gap-1"},G={class:"text-3xl"},q={class:"text-2xl"},J={class:"flex flex-wrap md:rounded-xl md:m-5 overflow-hidden g-slate-400 justify-betwen"},Q={class:"flex gap-1 mb-2"},X={class:"material-symbols-outlined"},ee={class:""},te={class:"text-2xl"},ae={class:"text-xs"},re={__name:"CurrentWeatherComponent",setup(u){const o=D(),s=C();return $(()=>{o.fetchCurrentWeather()}),(r,i)=>{var t,a,d,y,l,h,c;return p(),f(x,null,[e("div",M,[e("h2",L,m((t=_(o).weatherData)==null?void 0:t.GeoInfo.CountyName),1),e("div",O,[e("span",P,m((a=_(o).weatherData)==null?void 0:a.WeatherElement.AirTemperature)+"°",1),e("span",K,m(_(s).getWeatherIcon((d=_(o).weatherData)==null?void 0:d.WeatherElement.Weather,(y=_(o).weatherData)==null?void 0:y.ObsTime.DateTime)),1)]),e("div",R,[e("div",Z,[i[0]||(i[0]=e("span",{class:"vertical-text text-sm font-medium"},"最高",-1)),e("h3",Y,m((l=_(o).weatherData)==null?void 0:l.WeatherElement.DailyExtreme.DailyHigh.TemperatureInfo.AirTemperature)+"° ",1)]),e("div",U,[i[1]||(i[1]=e("span",{class:"vertical-text text-sm font-medium"},"最低",-1)),e("h3",G,m((h=_(o).weatherData)==null?void 0:h.WeatherElement.DailyExtreme.DailyLow.TemperatureInfo.AirTemperature)+"° ",1)])]),e("div",q,m((c=_(o).weatherData)==null?void 0:c.WeatherElement.Weather),1)]),e("ul",J,[(p(!0),f(x,null,k(_(o).currentDetail,(n,v)=>(p(),f("li",{class:"flex flex-col justify-center items-center text-white p-4 bg-black/[.05] backdrop-blur w-1/2 border-r border-b even:border-r-0 [&:nth-last-child(2)]:border-b-0 last:border-b-0",key:v},[e("p",Q,[e("span",X,m(n.icon),1),e("span",ee,m(n.text),1)]),e("span",te,[V(m(n.value)+" ",1),e("small",ae,m(n.unit),1)])]))),128))])],64)}}},A=W("hourlyWeather",()=>{const u="CWA-E6161C67-7694-4D12-B55A-F7EA4D41BE4C",o=g("臺北市"),s=g([]),r=g(!1),i=async(a="臺北市")=>{try{r.value=!1;const d=await T.get("https://opendata.cwa.gov.tw/api/v1/rest/datastore/F-D0047-089",{params:{Authorization:u,LocationName:a}});s.value=d.data.records.Locations[0].Location[0],r.value=!0}catch(d){console.error(d)}},t=I(()=>r.value?s.value.WeatherElement.find(d=>d.ElementName==="天氣現象").Time.map((d,y)=>({wx:d,temp:s.value.WeatherElement.find(l=>l.ElementName==="溫度").Time[y]})):{temp:[],wx:[]});return{locationName:o,hourlyForecast:s,fetchHourlyForecast:i,processHourlyForecast:t,isReady:r}}),se={class:"p-4 bg-black/[.1] backdrop-blur rounded-xl"},oe={key:0,class:""},ne={class:"overflow-x-auto"},le={class:"flex gap-4 py-2"},ie={class:"time"},ce={class:""},de={class:"icon"},ue={class:"material-symbols-outlined"},me={class:"temprature"},he={key:1,class:"text-white"},pe={__name:"HourlyForecastComponent",setup(u){const o=A(),s=C();return $(()=>{o.fetchHourlyForecast()}),(r,i)=>(p(),f("div",se,[i[0]||(i[0]=e("div",{class:""},[e("p",{class:"text-white hourly-title border-b pb-1"},"逐三小時天氣預報")],-1)),_(o).isReady?(p(),f("div",oe,[e("div",ne,[e("ul",le,[(p(!0),f(x,null,k(_(o).processHourlyForecast,(t,a)=>(p(),f("li",{class:"g-slate-500 text-white flex flex-col items-center p-4 min-w-fit",key:a},[e("p",ie,m(new Intl.DateTimeFormat("zh-TW",{weekday:"short"}).format(new Date(t.wx.StartTime))),1),e("p",ce,m(new Intl.DateTimeFormat("en-US",{hour:"2-digit",hour12:!1}).format(new Date(t.wx.StartTime))),1),e("p",de,[e("span",ue,m(_(s).getWeatherIcon(t.wx.ElementValue[0].WeatherCode,t.wx.StartTime)),1)]),e("p",me,m(t.temp.ElementValue[0].Temperature)+"°C",1)]))),128))])])])):(p(),f("div",he,"載入中......."))]))}},j=W("weeklyWeather",()=>{const u="CWA-E6161C67-7694-4D12-B55A-F7EA4D41BE4C",o=g("臺北市"),s=g([]),r=g(!1),i=async(a="臺北市")=>{try{r.value=!1;const d=await T.get("https://opendata.cwa.gov.tw/api/v1/rest/datastore/F-D0047-091",{params:{Authorization:u,LocationName:a}});s.value=d.data.records.Locations[0].Location[0],r.value=!0}catch(d){console.error(d)}},t=I(()=>r.value?s.value.WeatherElement.find(d=>d.ElementName==="天氣現象").Time.map((d,y)=>({wx:d,minTemp:s.value.WeatherElement.find(l=>l.ElementName==="最低溫度").Time[y],maxTemp:s.value.WeatherElement.find(l=>l.ElementName==="最高溫度").Time[y]})):{wx:[],minTemp:[],maxTemp:[]});return{locationName:o,weeklyForecast:s,fetchWeeklyForecast:i,processWeeklyForecast:t}}),fe={class:"bg-black/[.05] g-emerald-500 backdrop-blur p-5 rounded-xl"},_e={class:"text-white"},ge={class:"mt-2 p-4"},ye={key:0,class:"flex items-center justify-between gap-4"},ve={class:""},be={class:""},xe={class:"material-symbols-outlined"},we={class:"flex items-center flex-grow gap-3"},Ie={class:""},We={class:""},ke={__name:"WeeklyForecastComponent",setup(u){const o=j(),s=C();return $(()=>{o.fetchWeeklyForecast()}),(r,i)=>(p(),f("div",fe,[e("div",_e,[i[0]||(i[0]=e("h2",{class:"border-b pb-1"},"未來一周天氣",-1)),e("ul",ge,[(p(!0),f(x,null,k(_(o).processWeeklyForecast,(t,a)=>(p(),f("li",{class:"",key:a},[a%2===1?(p(),f("div",ye,[e("div",ve,m(new Intl.DateTimeFormat("zh-TW",{weekday:"narrow"}).format(new Date(t.wx.StartTime))),1),e("div",be,[e("span",xe,m(_(s).getWeatherIcon(t.wx.ElementValue[0].WeatherCode,t.wx.StartTime)),1)]),e("div",we,[e("span",Ie,m(t.minTemp.ElementValue[0].MinTemperature)+"°C",1),e("div",{class:"bg-black w-full h-1",style:z({background:`linear-gradient(to right, #fff ${t.minTemp.ElementValue[0].MinTemperature/3}%, #2e3192 ${t.minTemp.ElementValue[0].MinTemperature/3}%, #0090fb ${t.maxTemp.ElementValue[0].MaxTemperature*3}%, #fff ${t.maxTemp.ElementValue[0].MaxTemperature*3}%, #fff) 100%`})},null,4),e("span",We,m(t.maxTemp.ElementValue[0].MaxTemperature)+"°C",1)])])):N("",!0)]))),128))])])]))}},Ee={class:"relative mb-10 md:mr-4"},Te=["checked"],$e=["value"],De={__name:"CitySelectionComponent",props:{},setup(u){const o=D(),s=A(),r=j(),i=g(!1),t=g([{name:"基隆市",stationId:466940,cityId:312605},{name:"臺北市",stationId:466920,cityId:315078},{name:"新北市",stationId:466881,cityId:2515397},{name:"桃園縣",stationId:467050,cityId:3369297},{name:"新竹市",stationId:"C0D660",cityId:313567},{name:"新竹縣",stationId:467571,cityId:3369298},{name:"苗栗縣",stationId:467280,cityId:3369299},{name:"臺中市",stationId:467490,cityId:315040},{name:"彰化縣",stationId:467270,cityId:3369300},{name:"南投縣",stationId:467650,cityId:3369301},{name:"雲林縣",stationId:"C0K330",cityId:3369302},{name:"嘉義市",stationId:467480,cityId:312591},{name:"嘉義縣",stationId:"C0M790",cityId:3369303},{name:"臺南市",stationId:467410,cityId:314999},{name:"高雄市",stationId:467441,cityId:313812},{name:"屏東縣",stationId:467590,cityId:3369304},{name:"臺東縣",stationId:467660,cityId:3369305},{name:"花蓮縣",stationId:466990,cityId:3369306},{name:"宜蘭縣",stationId:467080,cityId:3369296},{name:"澎湖縣",stationId:467350,cityId:3369307},{name:"金門縣",stationId:467110,cityId:2332525},{name:"連江縣",stationId:467990,cityId:2332501}]),a=g(""),d=g(""),y=()=>{const h=t.value.filter(c=>c.name===a.value);d.value=h[0].stationId,o.fetchCurrentWeather(d.value),s.fetchHourlyForecast(a.value),r.fetchWeeklyForecast(a.value),l()},l=()=>{i.value=!i.value};return(h,c)=>(p(),f("div",Ee,[e("input",{type:"checkbox",name:"",id:"menu_control",checked:i.value,class:"hidden"},null,8,Te),e("label",{class:E(["md:hidde w-10 h-10 overflow-hidden rounded-[10px] backdrop-blur bg-white/[.02] absolute z-10 ight-8 op-8 md:ight-4 md:op-4 after:content-[''] after:w-8 after:h-[2px] after:px-2 after:overflow-hidden after:bg-white/[.7] after:absolute after:top-0 after:bottom-0 after:left-0 after:right-0 after:m-auto after:shadow-[0px_-8px_0_rgba(255,255,255,0.7)] before:content-[''] before:w-5 before:h-[2px] before:absolute before:top-0 before:bottom-0 before:left-1 before:m-auto before:bg-white/[.01] before:shadow-[0px_8px_0_rgba(255,255,255,0.7)]",[i.value?" opacity-0":" opacity-100"]]),for:"menu_control",onClick:l},null,2),e("div",{class:E(["order rounded-xl h-12 md:h-10 absolute w-full ight-0 z-10 overflow-hidden flex transition-transform ease-in-out duration-300",[i.value?"translate-y-0":"-translate-y-full"]])},[B(e("select",{name:"",id:"","onUpdate:modelValue":c[0]||(c[0]=n=>a.value=n),class:"appearance-none outline-none px-10 md:px-4 bg-black/[.05] backdrop-blur flex-1 text-sm rounded-lg block w-full p-2.5",onChange:c[1]||(c[1]=n=>y())},[c[2]||(c[2]=e("option",{disabled:"",value:"",class:"bg-gray-700 border-gray-600 text-white"},"請選擇縣市",-1)),(p(!0),f(x,null,k(t.value,n=>(p(),f("option",{key:n.name,value:n.name,class:"appearance-none bg-gray-700 border-gray-600 placeholder-gray-900 text-white"},m(n.name),9,$e))),128))],544),[[H,a.value]])],2)]))}},Ce={class:"container relative mx-auto z-10 rounded-xl h-full bg-all-inherit"},Se={class:"grid h-full md:grid-rows-1 auto-rows-auto"},Fe={class:"grid gap-4 md:gap-0 grid-cols-1 md:grid-cols-[1fr_2fr]"},Ae={class:"md:overflow-y-auto md:overflow-x-hidden bg-transparent md:m-5 text-white"},je={class:"g-slate-400 overflow-x-auto space-y-5 md:p-5 md:m-5"},ze={__name:"WeatherView",setup(u){const o=D();return(s,r)=>(p(),f("div",{class:E(["h-full md:h-dvh p-2 md:p-5 z-[-1] bg-cover bg-fixed md:after:h-full after:bg-black/[.5] after:w-full after:absolute after:top-0 after:left-0 after:bg-fixed after:bg-cover after:z-0 after:backdrop-blur",_(o).currentBackground])},[e("div",Ce,[e("div",Se,[e("div",Fe,[e("div",Ae,[w(De),w(re)]),e("div",je,[w(pe),w(ke)])])])])],2))}};export{ze as default};
